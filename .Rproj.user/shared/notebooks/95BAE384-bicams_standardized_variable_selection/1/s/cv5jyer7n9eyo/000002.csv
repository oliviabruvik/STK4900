"0","##   Polyhedral constraints not satisfied; you must recompute beta more accurately. With glmnet, make sure to use exact=TRUE in coef(), and check whether the specified value of lambda is too small (beyond the grid of values visited by glmnet). You might also try rerunning glmnet with a lower setting of the 'thresh' parameter, for a more accurate convergence."
"0",""
"0","binarize = FALSE"
"0","add_to_EDSS = 0.01 #0.01"
"0","reproduce_prev_results = FALSE ## also add_to_EDSS = 1"
"0","cleaned_ventricles = FALSE"
"0","seed_data = TRUE"
"0","tlv_type = 'log_tlv' #'log_tlv' ## or calculated_log_tlv"
"0","structure_analysis = FALSE"
"0","n_rim = 'digit' # 'binary' / NULL"
"0","cort = FALSE"
"0","collapsed_structures = FALSE"
"0",""
"0","set.seed(12)"
"0",""
"0","## load the libraries"
"0","library(readxl)"
"0","library(dplyr)"
"0","library(glmnet)"
"0","library(EveTemplate)"
"0","library(neurobase)"
"0","library(coefplot)"
"0","library(kableExtra)"
"0","library(formatR)"
"0","library(selectiveInference)"
"0","library(here)"
"0","library(stringr)"
"0","library(ggplot2)"
"0",""
"0","#load(here('processed_data2/distinct_datasets.rda'))"
"0","load(here('processed_data2/distinct_datasets_t2flair_tlv.rda'))"
"0",""
"0","bicams_data_distinct <- bicams_data_distinct %>%"
"0","    transmute(ID = subject,"
"0","              tlv = tlv,"
"0","              calculated_log_tlv = log(tlv))"
"0",""
"0","# "
"0","# ## Read in bicams data - standardized"
"0","# st_bicams_data <- read_excel(here('raw_data/BICAMS Paper Combined Data.xlsx')) %>%"
"0","#   rename(TLV = `FLAIR TLV (mm3)`) %>%"
"0","#   transmute(ID = stringr::str_pad(ID, 4, pad = '0'),"
"0","#             SDMT = ...25,"
"0","#             CVLT = ...33,"
"0","#             BVMT = ...41,"
"0","#             EDSS = EDSS,"
"0","#             EDSS_log = log(EDSS + 0.01)) %>%"
"0","#   filter(!is.na(ID)) %>%"
"0","#   distinct()"
"0","#   # filter(!(CVLT == 't-score'))"
"0","# "
"0","# ##FIX"
"0","# st_bicams_data$BVMT[st_bicams_data$BVMT == '< 20'] <- 20"
"0","# st_bicams_data$CVLT[st_bicams_data$CVLT == '46-47'] <- 47"
"0","# "
"0","# bicams_patient_data <- st_bicams_data %>%"
"0","#   mutate(CVLT = as.numeric(CVLT),"
"0","#          BVMT = as.numeric(BVMT),"
"0","#          SDMT = as.numeric(SDMT))"
"0",""
"0","## Read in bicams data - raw"
"0",""
"0",""
"0","bicams_patient_data <- read_excel(here('raw_data/BICAMS Paper Combined Data W T2_Tx_Sandra.xlsx')) %>%"
"0","  filter(!is.na(MSID)) %>%"
"0","  transmute(ID = substr(MSID, 3, 6),"
"0","            SDMT = `SDMT T1`,"
"0","            SDMT_z = ...29,"
"0","            CVLT = ...36,"
"0","            CVLT_t = ...37,"
"0","            BVMT = ...43,"
"0","            BVMT_t = ...45,"
"0","            cort = `Cortical Thickness`,"
"0","            TLV = `FLAIR TLV (mm3)`,"
"0","            log_tlv = log(TLV),"
"0","            EDSS = `EDSS T1`,"
"0","            EDSS_log = log(EDSS + add_to_EDSS),"
"0","            n_rim = `Number of Rim+ Lesions`) %>%"
"0","  distinct()"
"0",""
"0","# bicams_patient_data <- read_excel(here('raw_data/BICAMS Paper Combined Data.xlsx'),"
"0","#                            sheet = 'Patient Data') %>%"
"0","#   filter(!is.na(MSID)) %>%"
"0","#   transmute(ID = substr(MSID, 3, 6),"
"0","#             SDMT = SDMT,"
"0","#             SDMT_z = `z-score`,"
"0","#             CVLT = ...31,"
"0","#             CVLT_t = ...32,"
"0","#             BVMT = ...38,"
"0","#             BVMT_t = ...40,"
"0","#             cort = `Cortical Thickness - CORRECTED`,"
"0","#             TLV = `FLAIR TLV (mm3)`,"
"0","#             log_tlv = log(TLV),"
"0","#             EDSS = EDSS,"
"0","#             EDSS_log = log(EDSS + add_to_EDSS)) %>%"
"0","#   distinct()"
"0","#"
"0","# bicams_patient_data[89, 'CVLT'] <- '40'"
"0","# bicams_patient_data[89, 'CVLT_t'] <- '41'"
"0",""
"0","bicams_patient_data$BVMT_t[bicams_patient_data$BVMT_t == '< 20'] <- 20"
"0","bicams_patient_data$CVLT_t[bicams_patient_data$CVLT_t == '46-47'] <- 47"
"0",""
"0",""
"0","bicams_patient_data <- bicams_patient_data %>%"
"0","  mutate(SDMT = as.numeric(SDMT),"
"0","         SDMT_z = as.numeric(SDMT_z),"
"0","         CVLT = as.numeric(CVLT),"
"0","         CVLT_t = as.numeric(CVLT_t),"
"0","         BVMT = as.numeric(BVMT),"
"0","         BVMT_t = as.numeric(BVMT_t),"
"0","         cort = as.numeric(cort))"
"0",""
"0","if (n_rim == 'binary') {"
"0","  bicams_patient_data$n_rim[bicams_patient_data$n_rim > 0] <- 1"
"0","}"
"0",""
"0","if (reproduce_prev_results) {"
"0","  ## Read in bicams data - raw"
"0","  raw_bicams_data <- read_excel(here('raw_data/BICAMS Paper Combined Data.xlsx')) %>%"
"0","    filter(!is.na(MSID)) %>%"
"0","    rename(TLV = `FLAIR TLV (mm3)`) %>%"
"0","    transmute(ID = stringr::str_pad(ID, 4, pad = '0'),"
"0","              SDMT = as.numeric(SDMT),"
"0","              CVLT = as.numeric(...32),"
"0","              BVMT = as.numeric(...39),"
"0","              ##log_tlv = log(TLV),"
"0","              EDSS = as.numeric(EDSS),"
"0","              EDSS_log = log(EDSS + 0.01),"
"0","              cort = as.numeric(cort)) %>%"
"0","    distinct()"
"0","  bicams_patient_data <- raw_bicams_data"
"0","}"
"0",""
"0","## Get TLV"
"0","# bicams_patient_data <- left_join(bicams_data_distinct, bicams_patient_data) %>%"
"0","  "
"0","bicams_patient_data <- full_join(bicams_data_distinct, bicams_patient_data) %>%"
"0","  filter(ID != 1889) %>%"
"0","  filter(ID != 1260) %>%"
"0","  dplyr::arrange(ID)"
"0","# st_bicams_data <- left_join(bicams_data_distinct, st_bicams_data)"
"0","# raw_bicams_data <- left_join(bicams_data_distinct, raw_bicams_data)"
"0","  #mutate(log_tlv = log(tlv))"
"0",""
